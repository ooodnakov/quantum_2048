<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum 2048</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <!-- Start Screen -->
    <div id="startScreen" class="screen start-screen">
        <div class="start-content">
            <h1 class="game-title">Quantum 2048</h1>
            <p class="game-subtitle">The next evolution of 2048</p>
            
            <div class="instructions-card">
                <h3>How to Play</h3>
                <ul class="instructions-list">
                    <li>üéØ Use arrow keys to move tiles in the current gravity direction</li>
                    <li>üåÄ Press SPACE to rotate gravity and make tiles fall in new directions</li>
                    <li>‚è∞ Press R to rewind time (uses time crystals)</li>
                    <li>‚ú® Diagonal twins might quantum jump together after a move</li>
                    <li>üìà How high can you go? Merge tiles to set a new record!</li>
                </ul>
            </div>
            
            <button class="btn btn--primary btn--lg start-button" onclick="startGame()">
                Start Quantum Journey
            </button>
            <button class="btn btn--secondary" onclick="openSettings()">
                ‚öôÔ∏è Settings
            </button>
        </div>
    </div>

    <!-- Settings Screen -->
    <div id="settingsScreen" class="screen settings-screen hidden">
        <div class="settings-content">
            <h2>Settings</h2>
            <label>Board Size <input type="number" id="settingBoardSize" min="3" max="10"></label>
            <label>Starting Crystals <input type="number" id="settingCrystals" min="0" max="10"></label>
            <label>Starting Tiles <input type="number" id="settingStartTiles" min="1" max="10"></label>
            <label>Quantum Bonus Chance (%) <input type="number" id="settingQuantumChance" min="0" max="100"></label>
            <label>Phase Shift Spawn Chance (%) <input type="number" id="settingPhaseSpawn" min="0" max="100"></label>
            <label>Echo Duplicate Spawn Chance (%) <input type="number" id="settingEchoSpawn" min="0" max="100"></label>
            <label>Nexus Portal Spawn Chance (%) <input type="number" id="settingNexusSpawn" min="0" max="100"></label>
            <label>Rewind History <input type="number" id="settingHistory" min="1" max="10"></label>
            <div class="settings-actions">
                <button class="btn btn--primary" onclick="saveSettingsFromMenu()">Save</button>
                <button class="btn btn--secondary" onclick="resetSettingsFromMenu()">Revert</button>
                <button class="btn" onclick="closeSettings()">Back</button>
            </div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="screen game-screen hidden">
        <div class="game-container">
            <!-- Header -->
            <div class="game-header">
                <div class="score-section">
                    <div class="score-item">
                        <div class="score-label">Score</div>
                        <div class="score-value" id="score">0</div>
                    </div>
                    <div class="score-item">
                        <div class="score-label">Best</div>
                        <div class="score-value" id="bestScore">0</div>
                    </div>
                </div>
                
                <div class="crystals-section">
                    <div class="crystals-display">
                        <span class="crystal-icon">üíé</span>
                        <span id="crystalCount">3</span>
                        <span class="crystal-label">Time Crystals</span>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-section">
                <div class="gravity-control">
                    <div class="gravity-indicator">
                        <div class="gravity-label">Gravity:</div>
                        <div class="gravity-arrow" id="gravityArrow">‚¨áÔ∏è</div>
                    </div>
                    <button class="btn btn--secondary" id="rotateGravity" onclick="rotateGravity()">
                        üåÄ Rotate
                    </button>
                </div>
                
                <div class="action-controls">
                    <button class="btn btn--outline" id="rewindButton" onclick="rewindTime()">
                        ‚è∞ Rewind
                    </button>
                    <button class="btn btn--outline" onclick="newGame()">
                        üîÑ New Game
                    </button>
                </div>
            </div>

            <!-- Game Board -->
            <div class="game-board-container">
                <div class="game-board" id="gameBoard">
                    <!-- 6x6 grid will be generated by JavaScript -->
                </div>
                <div class="particles-container" id="particlesContainer"></div>
            </div>

            <!-- Color Guide -->
            <div class="color-guide">
                <h4>Evolution Path</h4>
                <div class="color-tiles">
                    <div class="color-tile" style="background: #ff6b6b;">2</div>
                    <div class="color-tile" style="background: #ffa726;">4</div>
                    <div class="color-tile" style="background: #ffeb3b;">8</div>
                    <div class="color-tile" style="background: #66bb6a;">16</div>
                    <div class="color-tile" style="background: #42a5f5;">32</div>
                    <div class="color-tile" style="background: #ab47bc;">64</div>
                    <div class="color-tile" style="background: #ec407a;">128</div>
                    <div class="color-tile" style="background: #f5f5f5; color: #333;">256</div>
                    <div class="color-tile" style="background: gold; color: #333;">512</div>
                    <div class="color-tile" style="background: platinum; color: #333;">1024</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div id="gameOverScreen" class="screen game-over-screen hidden">
        <div class="game-over-content">
            <h2 class="game-over-title">Quantum Journey Complete!</h2>
            <div class="final-score">
                <div class="score-label">Final Score</div>
                <div class="score-value" id="finalScore">0</div>
            </div>
            <div class="achievements" id="achievements"></div>
            <div class="game-over-actions">
                <button class="btn btn--primary btn--lg" onclick="newGame()">
                    Play Again
                </button>
                <button class="btn btn--secondary" onclick="showStartScreen()">
                    Main Menu
                </button>
            </div>
        </div>
    </div>

    <!-- Achievement Popup -->
    <div id="achievementPopup" class="achievement-popup hidden">
        <div class="achievement-content">
            <div class="achievement-icon">üèÜ</div>
            <div class="achievement-text" id="achievementText"></div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>