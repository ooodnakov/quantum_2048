<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum 2048</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="language-switch">
        <label for="languageSelect" data-i18n="label_language">Language</label>
        <select id="languageSelect" onchange="handleLanguageChange(this.value)">
            <option value="en">English</option>
            <option value="ru">–†—É—Å—Å–∫–∏–π</option>
        </select>
    </div>
    <!-- Start Screen -->
    <div id="startScreen" class="screen start-screen">
        <div class="start-content">
            <h1 class="game-title" data-i18n="title">Quantum 2048</h1>
            <p class="game-subtitle" data-i18n="subtitle">The next evolution of 2048</p>
            
            <div class="instructions-card">
                <h3 data-i18n="how_to_play">How to Play</h3>
                <ul class="instructions-list">
                    <li data-i18n="instruction_arrows">üéØ Use arrow keys to slide tiles</li>
                    <li data-i18n="instruction_rewind">‚è∞ Press R to rewind time (uses time crystals)</li>
                    <li data-i18n="instruction_delete">üóëÔ∏è Use Delete to remove a tile (costs void crystals)</li>
                    <li data-i18n="instruction_jump">‚ú® Diagonal twins might quantum jump together after a move</li>
                    <li data-i18n="instruction_record">üìà How high can you go? Merge tiles to set a new record!</li>
                </ul>
            </div>
            
            <button class="btn btn--primary btn--lg start-button" onclick="startGame()" data-i18n="start_button">
                Start Quantum Journey
            </button>
            <button class="btn btn--secondary" onclick="openSettings()" data-i18n="settings_button">
                ‚öôÔ∏è Settings
            </button>
        </div>
    </div>

    <!-- Settings Screen -->
    <div id="settingsScreen" class="screen settings-screen hidden">
        <div class="settings-content">
            <h2 data-i18n="settings_heading">Settings</h2>
            <label><span data-i18n="label_board_size">Board Size</span> <input type="number" id="settingBoardSize" min="3" max="10"></label>
            <label><span data-i18n="label_starting_crystals">Starting Crystals</span> <input type="number" id="settingCrystals" min="0" max="10"></label>
            <label><span data-i18n="label_starting_tiles">Starting Tiles</span> <input type="number" id="settingStartTiles" min="1" max="10"></label>
            <label><span data-i18n="label_quantum_chance">Quantum Bonus Chance (%)</span> <input type="number" id="settingQuantumChance" min="0" max="100"></label>
            <label><span data-i18n="label_phase_spawn">Phase Shift Spawn Chance (%)</span> <input type="number" id="settingPhaseSpawn" min="0" max="100"></label>
            <label><span data-i18n="label_echo_spawn">Echo Duplicate Spawn Chance (%)</span> <input type="number" id="settingEchoSpawn" min="0" max="100"></label>
            <label><span data-i18n="label_nexus_spawn">Nexus Portal Spawn Chance (%)</span> <input type="number" id="settingNexusSpawn" min="0" max="100"></label>
            <label><span data-i18n="label_rewind_history">Rewind History</span> <input type="number" id="settingHistory" min="1" max="10"></label>
            <div class="settings-actions">
                <button class="btn btn--primary" onclick="saveSettingsFromMenu()" data-i18n="save_button">Save</button>
                <button class="btn btn--secondary" onclick="resetSettingsFromMenu()" data-i18n="revert_button">Revert</button>
                <button class="btn" onclick="closeSettings()" data-i18n="back_button">Back</button>
            </div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="screen game-screen hidden">
        <div class="game-container">
            <!-- Header -->
            <div class="game-header">
                <div class="score-section">
                    <div class="score-item">
                        <div class="score-label" data-i18n="score_label">Score</div>
                        <div class="score-value" id="score">0</div>
                    </div>
                    <div class="score-item">
                        <div class="score-label" data-i18n="best_label">Best</div>
                        <div class="score-value" id="bestScore">0</div>
                    </div>
                </div>
                
                <div class="crystals-section">
                    <div class="crystals-display">
                        <span class="crystal-icon">üíé</span>
                        <span id="crystalCount">3</span>
                        <span class="crystal-label" data-i18n="time_crystals_label">Time Crystals</span>
                    </div>
                    <div class="void-display">
                        <span class="void-icon">üóëÔ∏è</span>
                        <span id="deleteCount">0</span>
                        <span class="void-label" data-i18n="void_crystals_label">Void Crystals</span>
                    </div>
                </div>
            </div>

            <!-- Controls -->
            <div class="controls-section">
                <div class="action-controls">
                    <button class="btn btn--outline" id="rewindButton" onclick="rewindTime()" data-i18n="rewind_button">
                        ‚è∞ Rewind
                    </button>
                    <button class="btn btn--outline" id="deleteModeButton" onclick="enterDeleteMode()" data-i18n="delete_button">
                        üóëÔ∏è Delete
                    </button>
                    <button class="btn btn--outline" onclick="newGame()" data-i18n="new_game_button">
                        üîÑ New Game
                    </button>
                </div>
            </div>

            <!-- Game Board -->
            <div class="game-board-container">
                <div class="game-board" id="gameBoard">
                    <!-- 6x6 grid will be generated by JavaScript -->
                </div>
                <div class="particles-container" id="particlesContainer"></div>
            </div>

            <!-- Color Guide -->
            <div class="color-guide">
                <h4 data-i18n="evolution_path_heading">Evolution Path</h4>
                <div class="color-tiles">
                    <div class="color-tile" style="background: #ff6b6b;">2</div>
                    <div class="color-tile" style="background: #ffa726;">4</div>
                    <div class="color-tile" style="background: #ffeb3b;">8</div>
                    <div class="color-tile" style="background: #66bb6a;">16</div>
                    <div class="color-tile" style="background: #42a5f5;">32</div>
                    <div class="color-tile" style="background: #ab47bc;">64</div>
                    <div class="color-tile" style="background: #ec407a;">128</div>
                    <div class="color-tile" style="background: #f5f5f5; color: #333;">256</div>
                    <div class="color-tile" style="background: gold; color: #333;">512</div>
                    <div class="color-tile" style="background: platinum; color: #333;">1024</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div id="gameOverScreen" class="screen game-over-screen hidden">
        <div class="game-over-content">
            <h2 class="game-over-title" data-i18n="game_over_title">Quantum Journey Complete!</h2>
            <div class="final-score">
                <div class="score-label" data-i18n="final_score_label">Final Score</div>
                <div class="score-value" id="finalScore">0</div>
            </div>
            <div class="achievements" id="achievements"></div>
            <div class="game-over-actions">
                <button class="btn btn--primary btn--lg" onclick="newGame()" data-i18n="play_again_button">
                    Play Again
                </button>
                <button class="btn btn--secondary" onclick="showStartScreen()" data-i18n="main_menu_button">
                    Main Menu
                </button>
            </div>
        </div>
    </div>

    <!-- Achievement Popup -->
    <div id="achievementPopup" class="achievement-popup hidden">
        <div class="achievement-content">
            <div class="achievement-icon">üèÜ</div>
            <div class="achievement-text" id="achievementText"></div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>